$size: 100px;
$colorFront: #ABD039;
$colorBack: #C73723;

.Scene {
    perspective: 1000px;
    height: 150px;
    top: 0px;
    left: -200px;
    position: relative;
    
    &::after {
        content: "â¬… Click me";
        position: absolute;
        top: -12px;
        left: 20px;
    }
}

.Cube {
    position: absolute;
    //top: 100px;
    //left: 100px;
        
    transform-style: preserve-3d;
    transition: transform .5s cubic-bezier(0.645, 0.045, 0.355, 1.000);
    transform: rotateY(0deg);

    &.flipped,
    .is-occupied & {
        transform: rotateY(90deg);
        
    }
    
    &--grows {
        animation: animate-slide-left 1s;
        animation-iteration-count: 1;
        &.flipped,
        .is-occupied & {
            animation: animate-slide-right 1s;
            animation-iteration-count: 1;
            // transform: rotateY(90deg) scale3d(0.4, 0.4, 0.4);
            // transform: rotateX(135deg) rotateY(45deg) scale3d(0.4, 0.4, 0.4);

        }
    }
}

.Cube-side {
    position: absolute;
    width: $size;
    height: $size;
    
    //transition: transform 1s;
    background: #efefef;
    transform-origin: bottom-left;
    backface-visibility: hidden;
    pointer-events: none;
}

.Cube-top {
    background: lighten($colorFront, 20%);
    transform: translate3d(-50%, -50%, 0) rotateX(-90deg) translateY(-$size / 2);
	transform-origin: top center;
}

.Cube-left {
    transform: translate3d(-50%, -50%, 0) rotateY(270deg) translateX(-$size / 2);
	transform-origin: center left;
    background: darken($colorFront, 10%);
}

.Cube-front {
    transform: translate3d(-50%, -50%, 0) translateZ($size / 2);
	transform-origin: top right;
    background: $colorFront;
}

.Cube-bottom {
    transform: translate3d(-50%, -50%, 0) rotateX(90deg) translateY($size / 2);
	transform-origin: bottom center;
    background: lighten($colorBack, 10%);
}

.Cube-back {
	transform: translate3d(-50%, -50%, 0) translateZ(-$size / 2) rotateY(180deg);
    background: darken($colorBack, 10%);
}
.Cube-right {
	transform: translate3d(-50%, -50%, 0) rotateY(-270deg) translateX($size / 2);
	transform-origin: top right;
    background: $colorBack;
}

@keyframes animate-slide-right {
  0%   { transform: rotateY(0deg) scale3d(1, 1, 1); }
  50%   { transform: rotateY(60deg) scale3d(0.8, 0.8, 0.8); }
  100% { transform: rotateY(90deg) scale3d(1, 1, 1); }
}
@keyframes animate-slide-left {
    0%   { transform: rotateY(90deg) scale3d(1, 1, 1); }
    50%   { transform: rotateY(60deg) scale3d(0.8, 0.8, 0.8); }
    100% { transform: rotateY(0deg) scale3d(1, 1, 1); }
}